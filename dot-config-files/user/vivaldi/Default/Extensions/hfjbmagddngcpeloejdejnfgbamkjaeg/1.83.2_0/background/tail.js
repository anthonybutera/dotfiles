"use strict";r.Kn(200,function(){function t(t){if(B||t.v||(t.v=V.b(t.u)),null==t.textSplit){t.title=n(t.title);var e=t.t,r=i(e);t.t=e.length!==t.u.length?r:"",t.textSplit=s(r,o(r),e.length-r.length,B?p-13-Math.min(t.title.length,40):p)}else t.t===t.u&&(t.t="")}function n(t){var n=t.length>p+40;return n&&(t=r.R(t,0,p+39)),e(n?t+"\u2026":t,o(t))}function e(t,n){var e,i,o,u,l;if(0===n.length)return r.P(t);for(e="",i=0,o=0;o<n.length;o+=2)u=n[o],l=n[o+1],e+=r.P(t.slice(i,u)),e+="<match>",e+=r.P(t.slice(u,l)),e+="</match>",i=l;return e+r.P(t.slice(i))}function i(t){var n=r.On(t);return!n||n>=t.length?t:t.slice(n,t.length-+(t.endsWith("/")&&!t.endsWith("://")))}function o(t){var n,e,i,r,o,l,s,f,c,a,_,g=[];for(n=0,e=k.length;n<e;n++)for(i=0,r=0,o=void 0,s=(l=t.split(Q.qt[n])).length-1,f=k[n].length;i<s;i++,r=o)o=(r+=l[i].length)+f,g.push([r,o]);if(0===g.length)return g;if(1===g.length)return g[0];for(g.sort(u),c=g[0],n=1,a=1,e=g.length;a<e;a++)c[n]>=(_=g[a])[0]?c[n]<_[1]&&(c[n]=_[1]):(c.push(_[0],_[1]),n+=2);return c}function u(t,n){return t[0]-n[0]}function s(t,n,e,i){var o,u,l,s,f,c="",a=t.length,_=a,g="";if(a<=i||(e>1?_=t.indexOf("/")+1||a:(_=t.indexOf(":"))<0?_=a:r.W.test(t.slice(0,_+3).toLowerCase())?_=t.indexOf("/",_+4)+1||a:_+=22),_<a&&n.length)for(o=n.length,u=a+8;(o-=2)>-4&&u>=_;u=o<0?0:n[o])if(l=o<0?_:n[o+1],(s=u-20-Math.max(l,_))>0&&(a-=s)<=i){_=l+(i-a);break}for(a=0,o=0;a<i&&o<n.length;o+=2)(s=(u=n[o])-20-(f=Math.max(a,_)))>0?(i+=s,g=r.R(t,a,f+11),c+=r.P(g),c+="\u2026",g=r.M(t,u-8,u),c+=r.P(g)):a<u&&(g=t.slice(a,u),c+=r.P(g)),g=t.slice(u,a=n[o+1]),c+="<match>",c+=r.P(g),c+="</match>";return t.length<=i?(g=t.slice(a),c+r.P(g)):(g=r.R(t,a,i-1>a?i-1:a+10),c+r.P(g)+"\u2026")}function c(t){return $.Qt(t.t,t.title)}function a(t){var n=(t-$.Ht)/18144e5;return n<0?0:n<1?n*n*.666667:n<1.000165?.666446:0}function _(t,n,e){var i=a(e),r=$.Qt(t,n);return i<=r?r:(r+i)/2}function g(t,n){return n}var v=0,h=null,S=false,B=false,U=0,p=0,y=0,b=0,T=0,w=0,k=[""],x="",R="",C="",M=false,E="",O=0,D=null,I=true,N=function(t,n,e,i,r,o){this.e=t,this.u=n,this.t=e,this.title=i,this.r=r(this,o)},j=performance,P={Xt:[],Yt:[],ti:null,ni:"",ei:0,ii:0,Hr:function(t,n){if(0!==k.length&&1&O)2===P.ii?P.ri():P.ti=t;else if(q.oi([],1),n)return;0===P.ii&&P.ui()},li:function(t){return 47===t.charCodeAt(0)},ri:function(){var t,e,i,r,o,l,s,f,c,a,_=k.some(P.li),m=!!G.si,v=[],d=G.fi&&G.fi.Xt||P.Xt,h=d.length,S=[];for(e=0;e<h;e++)$.ci((i=d[e]).ai,_?i.ni:i._i)&&(I||i.gi)&&(m&&v.push(i),S.push([-$.Qt(i.ai,i._i),e]));for(m&&(G.si.Xt=v),T+=t=S.length,t?(S.sort(u),w>0&&!(6&O)?(S=S.slice(w,w+y),w=0):t>w+y&&(S.length=w+y)):O^=1,r=[],o=64&U?-.666446:0,l=0,s=S;l<s.length;l++)c=(f=s[l])[0],o&&(c=c<o?c:(c+o)/2),a=new N("bookm",(i=d[e=f[1]]).In,i.ai,_?i.ni:i._i,g,-c),r.push(a),null!==i.mi&&(a.u=i.mi,a.title=n(a.title),a.textSplit="javascript: \u2026",a.t=i.vi);q.oi(r,1)},di:function(){var t=chrome.bookmarks;t.onCreated.addListener(P.hi),t.onRemoved.addListener(P.Si),t.onChanged.addListener(P.Si),t.onMoved.addListener(P.hi),t.onImportBegan.addListener(function(){chrome.bookmarks.onCreated.removeListener(P.hi)}),t.onImportEnded.addListener(function(){var t=P.hi;chrome.bookmarks.onCreated.addListener(t),t()})},ui:function(){P.ii=1,P.zt&&(clearTimeout(P.zt),P.zt=0),chrome.bookmarks.getTree(P.Bi)},Bi:function(t){P.ii=2,P.Xt=[],P.Yt=[],G.Er(2),t.forEach(P.Ui,P);var n=P.ti;if(P.ti=null,setTimeout(function(){return X.pi(P.Xt)},50),P.di&&(setTimeout(P.di,0),P.di=null),n&&!n.o)return P.ri()},Ui:function(t){var n,e,i,o=t.title,u=t.id,l=P.ni+"/"+(o||u);if(t.children)return P.Yt.push(u),n=P.ni,2<++P.ei&&(P.ni=l),t.children.forEach(P.Ui,P),--P.ei,void(P.ni=n);i=(e=t.url).startsWith("javascript:"),P.Xt.push({yi:u,ni:l,_i:o||u,ai:i?"javascript:":e,gi:D?z.bi(e,o):1,In:i?"javascript:":e,mi:i?e:null,vi:i?r.Q(e):null})},zt:0,Ti:0,wi:false,ki:function(){var t=j.now()-P.Ti;0===P.ii&&(t>=6e4||t<-5e3?(P.zt=P.Ti=0,P.wi=false,P.ui()):(P.Xt=[],P.Yt=[],P.zt=setTimeout(P.ki,3e4),G.Er(2)))},hi:function(){P.Ti=j.now(),P.ii<2||(P.zt=setTimeout(P.ki,6e4),P.ii=0)},Si:function(t,n){for(var e,i,r,o,u,l,s,f=P.Xt,c=f.length,a=n&&n.title,_=0;_<c&&f[_].yi!==t;_++);if(_<c)return i=(e=f[_]).In,r=n&&n.url,X.xi&&(null==a?i!==e.ai||!n:null!=r&&i!==r)&&i in X.Ri&&H.Ci(i)<0&&delete X.Ri[i],void(null!=a?(e.ni=e.ni.slice(0,-e._i.length)+(a||e.yi),e._i=a||e.yi,r&&(e.In=r,e.ai=X.Mi(r,e),X.Ei()),D&&(e.gi=z.bi(e.In,e._i))):(f.splice(_,1),n||P.hi()));if(!(P.Yt.indexOf(t)<0)){if(null!=a)return P.hi();if(!P.wi&&X.xi){for(o=X.Ri,u=H.Ci,l=0,s=f;l<s.length;l++)(i=s[l].In)in o&&u(i)<0&&delete o[i];P.wi=false}return P.hi()}}},J={Hr:function(t,n){var e,i,r,o,u,l;if(!(2&O))return q.oi([],2);if(i=k.length>0,e=H.Oi){if(i)return q.oi(J.Di(e),2);(H.Ii>10||H.Ni>0)&&H.ji()}else if(r=i?function(n){if(!t.o)return q.oi(J.Di(n),2)}:null,i&&(B||H.Pi)?(H.Pi>0&&clearTimeout(H.Pi),H.Pi=0,H.Ji(r)):(H.Pi||(H.Pi=setTimeout(function(){H.Pi=0,H.Ji(r)},i?200:150)),i&&q.Li((l=(u=(o=q.Fi).length)>0)&&"search"===o[0].t?[o[0]]:[],S&&l,0,0,u)),i)return;S=false,0===n?q.Vi(J.qi,t):chrome.sessions?chrome.sessions.getRecentlyClosed(J.Ai.bind(J,t)):J.$i([],t,{},0,0)},Di:function(t){var n,e,i,o,u=1===k.length&&("."===k[0][0]?/^\.\w+$/.test(k[0]):(r.J(k[0],null,-2),r.Y<=2)),l=!(G.fi&&G.fi.Oi),s=!!G.si,f=[],c=[-1.1,-1.1],m=[],v=$.ci,d=Q.qt[0],h=y+w,S=-1.1,B=0,U=0,p=0;for(E&&h++,U=h;--U;)c.push(-1.1,-1.1);for(h=2*h-2,l||(t=G.fi.Oi),n=t.length;B<n;B++)if(e=t[B],(u?d.test(e.ai):v(e.ai,e._i))&&(I||e.gi)&&(s&&f.push(e),p++,!(S>=(i=u?a(e.Wi)||1e-16*e.Wi:_(e.ai,e._i,e.Wi))))){for(U=h-2;0<=U&&c[U]<i;U-=2)c[U+2]=c[U],c[U+3]=c[U+1];c[U+2]=i,c[U+3]=B,S=c[h]}for(s&&(G.si.Oi=f),T+=p,p||(O^=2),5&O?B=0:(B=2*w,w=0);B<=h&&!((i=c[B])<=0);B+=2)(e=t[c[B+1]]).In!==E?((o=new N("history",e.In,e.ai,e._i,g,i)).visit=e.Wi,m.push(o)):h--;return X.Ei(),m},qi:function(t,n){var e,i,o,u,l,s;if(G.Qi(n),!t.o){for(e=r.D(),i=0,o=0,u=n;o<u.length;o++)(l=u[o]).incognito&&h||(s=l.url||l.pendingUrl)in e||(e[s]=1,i++);return J.$i([],t,e,w,i)}},Ai:function(t,n){var e,i,r;if(!t.o)return e=[],i={},r=-w,n.some(function(t){var n,o,u=t.tab;return!!u&&((n=u.url).length>2e3&&(u.url=n=H.Hi(n,u)),!(!I&&!z.bi(n,u.title))&&!((o=n+"\n"+u.title)in i)&&(i[o]=1,i[n]=1,++r>0&&e.push({In:u.url,_i:u.title,zi:t.lastModified,Gi:u.sessionId}),e.length>=y))})?J.Ki(e):J.$i(e,t,i,-r,0)},$i:function(t,n,e,i,r){chrome.history.search({text:"",maxResults:w+y*(I?1:2)+r},function(r){if(!n.o){r=r.filter(function(t){var n=t.url;return n.length>2e3&&(t.url=n=H.Hi(n,t)),!(n in this)},e),I||(r=r.filter(function(t){return z.bi(t.url,t.title||"")}));var o=r.map(function(t){return{In:t.url,_i:t.title,zi:t.lastVisitTime,Gi:null}});i<0?(o.length=Math.min(o.length,y-t.length),o=t.concat(o)):i>0&&(o=o.slice(i,i+y)),J.Ki(o)}})},Ki:function(t){t.forEach(J.Xi),w=0,X.Ei(),q.oi(t,2)},Xi:function(t,n,e){var i=t.In,r=new N("history",i,X.Mi(i,i),t._i||"",g,(99-n)/100),o=t.Gi;r.visit=t.zi,o&&(r.s=o,r.label="&#8617;"),e[n]=r}},L={Hr:function(t,n){if(1!==k.length||!(16&O)||k[0].lastIndexOf("/",k[0].length-2)>=0)return q.oi([],16);if(H.F);else{if(!H.Oi)return n>0?q.oi([],16):H.Ji(function(){if(!t.o)return L.Hr(t,0)});L.ui(H.Oi)}return L.ri()},ri:function(){var n,e,i,o,u,l,s,f,c,a,m,v,d,h,B,U=r.F,p=$.Yi,b=k[0].replace("/","").toLowerCase(),x="",R=-1.1;for(i in $.Yi=3,U)i.includes(b)&&(e=U[i],(I||e.Zi>0)&&(o=_(i,"",e.Wi))>R&&(R=o,x=i));u=x.length===b.length,x&&!u&&(x.startsWith("www.")||x.startsWith(b)||(l=x.slice(x.indexOf(".")+1)).includes(b)&&(void 0,(s=U[l="www."+l])&&(I||s.Zi>0)&&(x=l,e=s)),(f=x.startsWith(b)?0:x.startsWith("www."+b)?4:-1)>=0&&(v=(a=(c=r.cn(x))[0]).length-1,(m=c[1])>1&&(!(f=x.length-f-b.length-a[v].length-1)||3===m&&f===a[v-1].length+1)&&(u=true))),x&&(T++,E=d=(e.in?"https://":"http://")+x+"/",w>0?w--:(S=u||S,n=new N("domain",d,b===k[0]?x:x+"/","",g,2),(B=(h=H.Jr?H.Ci(d):-1)>0?H.Oi[h]:null)&&(n.visit=B.Wi),t(n),B&&(I||B.gi)&&(n.title=r.P(B._i)),--y)),$.Yi=p,q.oi(n?[n]:[],16)},ui:function(t){var n,e,i,o,u,l,s,f,c,a,_;for(L.ui=null,n=L.Wr,e=H.F=r.F,i=0,o=t;i<o.length;i++)l=(u=o[i]).Wi,s=u.gi,(f=n(u.In))&&(a=f.Qr,(_=e[c=f.Gr])?(_.Wi<l&&(_.Wi=l),_.Zi+=s,a>=7&&(_.in=8===a?1:0)):e[c]={Wi:l,Zi:s,in:8===a?1:0})},Wr:function(t){var n,e,i=t.lastIndexOf(":",5),r=i>0?t.slice(0,i):"";if("http"===r)n=7;else if("https"===r)n=8;else{if("ftp"!==r)return null;n=6}return e=t.indexOf("/",n),{Gr:"__proto__"!==(t=t.slice(n,e<0?t.length:e))?t:".__proto__",Qr:n}}},F={Hr:function(t,n){!(4&O)||n&&(!k.length||32&U)?q.oi([],4):q.Vi(F.ri,t)},ri:function(t,n){var e,i,o,u,l,s,f,a,_,g,v,d,S,p,x,R,C,E,D,I,j,P,J,L,V,A,W,Q,H,z,K,Y,Z,tt,nt,et,it;if(G.Qi(n),!t.o){if(e=m.ir,i=k.length<=0,o=3&O,l=[],(u=!!(8&U)&&M&&i&&!B)&&n.length>w){for(s=r.D(),a=0,_=n;a<_.length;a++)s[(g=_[a]).id]=g;if(n.length>b){for(p=(S=(d=(v=s[e])?v.openerTabId:0)?s[d]:null)?S.index:v?v.index-1:0,x=S?0:b/2|0;1<--x&&p>0&&n[p-1].openerTabId===d;p--);n=p>0?n.slice(p).concat(n.slice(0,p)):n}}for(R=[],C=[],E=0,D=n;E<D.length;E++)g=D[E],!M&&h&&g.incognito||(I=g.url||g.pendingUrl,j=g.text||(g.text=X.Mi(I,g.incognito?"":I)),(i||$.ci(j,g.title))&&(P=g.windowId,!M&&C.lastIndexOf(P)<0&&C.push(P),R.push(g)));if(T+=f=R.length,f||(O^=4),w>=f&&!o)return w=0,q.oi(l,4);if(C.sort(F.Xr),J=i?u?F.Yr:F.Zr:c,L=u?r.D():null,V=C.length>1?m.wr:0,A=0,u)for(W=0,Q=R;W<Q.length;W++)L[(g=Q[W]).id]=(z=(H=g.openerTabId)&&L[H])?z<5?z+1:5:1;for(K=0,Y=R;K<Y.length;K++)g=Y[K],Z="#",V&&g.windowId!==V&&(Z+=C.indexOf(g.windowId)+1+":"),Z+=g.index+1,!h&&g.incognito&&(Z+="*"),g.discarded&&(Z+="~"),tt=g.id,nt=u?L[tt]:1,et=new N("tab",I=g.url||g.pendingUrl,g.text,g.title,J,u?++A:tt),e===tt&&(u||(et.r=i?1<<31:0),Z="#("+Z.slice(1)+")"),et.visit=m.Rr[tt],et.s=tt,et.label=Z,nt>1&&(et.level=" level-"+nt),l.push(et);if(l.sort(q.to),it=l.length,o||it>w+y||!i)for(w>0&&!o?(l=l.slice(w,w+y),it=y,w=0):it>w+y&&(l.length=it=w+y),x=o?0:it;x<it;x++)l[x].r*=8/(x/4+1);else if(w>0){for(it=(l=l.slice(w).concat(l.slice(0,y+w-it))).length,x=0;x<it;x++)l[x].r=it-x;w=0}X.Ei(),q.oi(l,4)}},Xr:function(t,n){return t-n},Zr:function(t,n){return m.Rr[n]||(4&U?2047+n:-n)},Yr:function(t,n){return 1/n}},V={hn:0,Hr:r.S,no:function(t,n){var e,i,o,u,s,f,c,a,_,g;if(!(8&O))return q.oi([],8);if(o=(i=k).length>0?i[0]:"",0===i.length);else{if(true!==n&&"\\"===o[0]&&"\\"!==o[1])return o.length>1?i[0]=o.slice(1):i.shift(),o=R.slice(1).trimLeft(),e=V.eo(o),I=I&&z.io([o]),q.oi([e],8);u=l.dn.searchEngineMap[o]}if(true===n){if(!u)return true}else{if(!u&&!o.startsWith("vimium://"))return 0===v&&i.length<=1&&(v=i.length?V.ro():-1),q.oi([],8);u&&C&&(i.push(C),w=0),i.length>1||(v=-1)}if(i.length>1&&u?(i.shift(),R.length>200&&(i=R.split(" ")).shift()):u&&(i=[]),I=I&&z.io([o]),u?(c=s=(a=r.Cn(i,u.In,u.S,[])).In,f=a.Rn):(c=s=i.join(" "),f=[]),"~"===o);else if(s.startsWith("vimium://")){if(_=r.Z(s.slice(9),1,true),g=V.oo.bind(V,i,s,c,u,f),_ instanceof Promise)return _.then(V.uo.bind(V,t,g));if(_ instanceof Array)return V.uo(t,g,_);_&&(s=c=_,f=[])}else s=r.J(s,null,-2);return e=V.oo(i,s,c,u,f),q.oi([e],8)},uo:function(t,n,e){var i,o,u,l,s;if(!t.o){switch(e[1]){case 5:case 6:if(v=6===e[1]&&k.length>1?v:-1,!(o=e[0]))break;return C="",(k=((R="\\ "+o).length<201?R:r.R(R,0,200).trim()).split(" ")).length>1&&(k[1]=r.Mn(k[1])),V.no(t);case 2:if(k=(u=e[0]).length>1||1===u.length&&u[0]?u:k,(l=V.hn++)>12)break;if(s=V.no(t,true),l<=0&&(V.hn=0),true!==s)return s;break;case 0:e[0]&&(i=V.lo(n(),e))}q.oi(i||[n()],8)}},oo:function(t,n,o,u,l){var s=new N("search",n,o,(u?u.Hn+": ":"")+t.join(" "),g,9);return t.length>0&&u?(s.t=V.so(o,l),s.title=e(s.title,[u.Hn.length+2,s.title.length]),s.textSplit=e(s.t,l)):(s.t=r.Q(i(o)),s.title=r.P(s.title),s.textSplit=r.P(s.t)),B||(s.v=u&&u.S||V.b(n)),s.p=u?u.Hn:"",s},lo:function(t,n){var e=n[0],i=new N("math","vimium://copy "+e,e,e,g,9);return--i.r,i.title='<match style="text-decoration: none;">'+r.P(i.title)+"<match>",i.textSplit=r.P(n[2]),[t,i]},b:function(t){for(var n=H.Jr&&t.startsWith("http")?H.Ci(t):-1,e=n<0?~n-1:n,i=e<0?[]:H.Oi,r=t.indexOf(":")+3,o=0,u=0,l="",s="",f=0,c=0;o<=e&&(r="/"===t[r]?r+1:t.indexOf("/",r+1)+(u?0:1))>0;u=r){for(l=t.slice(u,r),c=e;o<=c;)if((s=i[f=o+c>>>1].In.slice(u))>l)c=f-1;else{if(s===l)return u?i[f].In:"";o=f+1}if(o<=e&&u&&"/"===(l=i[o].In)[r]&&l.length<=++r)return l}return""},fo:0,Nt:0,ro:function(){var t=k[0],n=l.dn.searchKeywords;return null==n?(V.Nt=V.Nt||setTimeout(V.co,67),-2):t.length>=V.fo?0:n.includes("\n"+t)?-2:0},so:function(t,n){var e,i,o,u=n.length;if(i=r.Q(n.length>0?t.slice(0,n[0]):t),(e=r.On(i))&&(i=i.slice(e),e=0),n.length<=0)return i;for(o=n[0];n[e]=i.length,u>++e;)i+=r.Q(t.slice(o,n[e])),o=n[e];return o<t.length&&(i+=r.Q(t.slice(o))),i},eo:function(t){var n=r.J(t,null,-2),o=4===r.Y,u=new N("search",n,r.Q(i(n)),"",g,9);return u.title=o?"~: "+e(t,[0,t.length]):r.P(t),u.textSplit=r.P(u.t),B||(u.v=V.b(n)),u.p=o?"~":"",u},co:function(){var t,n,e,i=Object.keys(l.dn.searchEngineMap),r=0;for(n=0,e=i;n<e.length;n++)r<(t=e[n].length)&&(r=t);l.he("searchKeywords","\n"+i.join("\n")),V.fo=r,V.Nt=0}},q={ao:0,_o:0,Fi:null,go:null,Li:null,Hr:function(t){var n,e,i,r;if(q.go&&(q.go.o=true),n=q.go={o:false},q._o=0,e=1,i=-9&(O&=t[0])?t.length:2,q.Fi=[],q.ao=i-1,v=w&&-1,t[1]===V){if(r=V.no(n),i<3)return;if(r)return void r.then(q.mo.bind(null,t,n,e));e=2}q.mo(t,n,e)},mo:function(t,n,e){for($.Ht=Date.now()-18144e5,$.Yi=3*k.length||.01,k.indexOf("__proto__")>=0&&(k=k.join(" ").replace(/(^| )__proto__(?=$| )/g," __proto_").trimLeft().split(" ")),G.Gt(),k.sort(q.vo),Q.do();e<t.length;e++)t[e].Hr(n,e-1)},vo:function(t,n){return n.length-t.length||(t<n?-1:t===n?0:1)},Vi:function(t,n,e){var i,r=m.rr;null===h&&(r=1!==r?r:f>=52||l.$.De||!!G.Rr.Rr?m.rr=0:1),1!==r?(G.Rr.ho!==(i=((h=2!==r)?2:0)|(M?1:0))&&(G.Rr={Rr:null,ho:i}),(e=e||G.Rr.Rr)?t(n,e):chrome.tabs.query(M?{currentWindow:true}:{},t.bind(null,n))):chrome.windows.getCurrent({populate:M},function(e){m.rr=h?0:2,n.o||q.Vi(t,n,M?e.tabs:null)})},oi:function(t,n){var e=q.Fi,i=t.length;if(i>0&&(q._o|=n,q.Fi=0===e.length?t:e.concat(t),8===n&&(S=!0,y-=i,T+=i)),0==--q.ao)return e=null,q.So()},So:function(){var n,e,r,o,u,l,s,f,c,a,_=q.Fi;return q.Fi=null,_.sort(q.to),w>0?(_=_.slice(w,w+b),w=0):_.length>b&&(_.length=b),Q.Bo=Q.Uo=null,k.length>0&&(e=i(n=k[0]),((r=n.length!==e.length)||n.endsWith("/")&&n.length>1)&&(k[0]=r?e:n.slice(0,-1),Q.po())),_.forEach(t),o=_.length>0,u=S&&o,l=T,s=":"===x,c=2!=(f=v<0?-2!==v||o?0:3:I?k.length<=0?0:o?2:s?3:1:0)||s?0:q._o,a=q.Li,q.yo(),a(_,u,f,c,l)},yo:function(){q.go=q.Li=h=null,k=[],x=R=C=E="",Q.qt=null,$.Yi=3,$.Ht=v=q._o=U=y=b=T=p=0,O=0,S=B=false,M=false,I=true},bo:function(){var t,n,e=R;if(w=0,C="",!(0===e.length||(t=(e=e.slice(-5)).lastIndexOf("+"))<0||0!==t&&32!==e.charCodeAt(t-1))){if(e=e.slice(t),t=R.length-e.length,(n=parseInt(e,10))>=0&&"+"+n===e&&n<=(t>0?100:200))w=n;else if("+"!==e)return;R=R.slice(0,t&&t-1),C=e}},to:function(t,n){return n.r-t.r}},A={__proto__:null,bookm:[1,P],domain:[16,L],history:[2,J],omni:[63,V,L,J,P,F],search:[8,V],tab:[4,F]},$={ci:function(t,n){var e,i,r=Q.qt;for(e=0,i=k.length;e<i;e++)if(!(r[e].test(t)||r[e].test(n)))return false;return true},Yi:3,To:[0,0],wo:function(t,n){var e,i=0;return(e=n.split(Q.qt[t]).length)<1?$.To:(i=1,Q.Uo[t].test(n)&&(i+=1,Q.Bo[t].test(n)&&(i+=1)),[i,(e-1)*k[t].length])},Qt:function(t,n){var e,i,r,o=0,u=0,l=0,s=0,f=!!n;for(Q.Uo||Q.ko(),e=0,i=k.length;e<i;e++)s+=(r=$.wo(e,t))[0],l+=r[1],f&&(u+=(r=$.wo(e,n))[0],o+=r[1]);return s=s/$.Yi*$.xo(l,t.length),0===o?n?s/2:s:s<(u=u/$.Yi*$.xo(o,n.length))?u:(s+u)/2},Ht:0,xo:function(t,n){return t<n?t/n:n/t}},W=/[$()*+.?\[\\\]\^{|}]/g,Q={qt:null,Uo:null,Bo:null,do:function(){var t,n,e,i=Q.qt=[];for(Q.Uo=Q.Bo=null,t=0,n=k;t<n.length;t++)e=n[t],i.push(new RegExp(e.replace(W,"\\$&"),r.Gn(e)?"":"i"))},ko:function(){var t,n,e,i,o,u=Q.Uo=[],l=Q.Bo=[];for(t=0,n=k;t<n.length;t++)i="\\b"+(e=n[t]).replace(W,"\\$&"),o=r.Gn(e)?"":"i",u.push(new RegExp(i,o)),l.push(new RegExp(i+"\\b",o))},po:function(){if(Q.qt){var t=k[0];Q.qt[0]=new RegExp(t.replace(W,"\\$&"),r.Gn(t)?"":"i")}}},H={Ro:0,Ii:0,Ni:0,Jr:false,Pi:0,Oi:null,Co:null,F:null,Ji:function(t){H.Co?t&&H.Co.push(t):(H.Co=t?[t]:[],H.Ro=Date.now(),H.Pi||chrome.history.search({text:"",maxResults:2e4,startTime:0},function(t){setTimeout(H.Mo,0,t)}))},Mo:function(t){var n,e,i,r,o,u,l;for(H.Mo=null,n=0,e=t.length;n<e;n++)(r=(i=t[n]).url).length>2e3&&(r=H.Hi(r,i)),t[n]={ai:r,_i:i.title,Wi:i.lastVisitTime,gi:1,In:r};if(D)for(o=0,u=t;o<u.length;o++)0===z.bi((l=u[o]).ai,l._i)&&(l.gi=0);setTimeout(function(){setTimeout(function(){var t,n,e,i,r,o,u,l,s=H.Oi;for(t=s.length-1;0<t;)for(r=(i=(n=s[t]).ai=X.Mi(e=n.In,n)).length>=e.length;0<=--t&&!((u=(o=s[t]).In).length>=e.length)&&e.startsWith(u);)o.In=e.slice(0,u.length),l=r?u:X.Mi(u,o),o.ai=r||l.length<u.length?i.slice(0,l.length):l;H.F||setTimeout(function(){L.ui&&L.ui(H.Oi)},200)},100),H.Oi.sort(function(t,n){return t.In>n.In?1:-1}),H.Jr=true,chrome.history.onVisitRemoved.addListener(H.Eo),chrome.history.onVisited.addListener(H.Oo)},100),H.Oi=t,H.Ji=function(t){t&&t(H.Oi)},H.Co&&H.Co.length>0&&setTimeout(function(t){var n,e;for(n=0,e=t;n<e.length;n++)(0,e[n])(H.Oi)},1,H.Co),H.Co=null},Oo:function(t){var n,e,i,r,o,u,l,s,f,c=t.url;if(c.length>2e3&&(c=H.Hi(c,t)),n=t.lastVisitTime,e=t.title,i=++H.Ii,r=H.F,(o=H.Ci(c))<0&&H.Ni++,(i>59||i>10&&Date.now()-H.Ro>3e5)&&H.ji(),u=o>=0?H.Oi[o]:{ai:"",_i:e,Wi:n,gi:D?z.bi(c,e):1,In:c},r&&(s=L.Wr(c))&&((l=r[s.Gr])?(l.Wi=n,o<0&&(l.Zi+=u.gi),s.Qr>=7&&(l.in=8===s.Qr?1:0)):r[s.Gr]={Wi:n,Zi:u.gi,in:8===s.Qr?1:0}),o>=0)return u.Wi=n,void(e&&e!==u._i&&(u._i=e,G.Nt&&G.Er(1),D&&(f=z.bi(c,e),u.gi!==f&&(u.gi=f,l&&(l.Zi+=f||-1)))));u.ai=X.Mi(c,u),H.Oi.splice(~o,0,u),G.Nt&&G.Er(1)},Eo:function(t){var n,e,i,o,u,l,s,f,c,a,_,g,m,v;if(X.Do.length=0,n=X.Ri,G.Er(1),t.allHistory){for(H.Oi=[],H.F&&(H.F=r.F=r.D()),e=r.D(),i=0,o=P.Xt;i<o.length;i++)(l=n[(u=o[i]).In])&&(e[u.In]=l);X.Ri=e}else for(s=H.Ci,f=H.Oi,c=H.F,_=0,g=t.urls;_<g.length;_++)(u=s(m=g[_]))>=0&&(c&&f[u].gi&&(v=L.Wr(m))&&(a=c[v.Gr])&&--a.Zi<=0&&delete c[v.Gr],f.splice(u,1),delete n[m])},Hi:function(t,n){var e=t.lastIndexOf(":",9),i=e>0&&"://"===t.substr(e,3),o=n.title;return t=t.slice(0,(i?t.indexOf("/",e+4):e)+320)+"\u2026",o&&o.length>160&&(n.title=r.R(o,0,160)),t},ji:function(){var t=Date.now();if(H.Ni<=0);else{if(t<H.Ro+1e3&&t>=H.Ro)return;setTimeout(chrome.history.search,50,{text:"",maxResults:Math.min(999,H.Ii+10),startTime:t<H.Ro?t-3e5:H.Ro},H.Io)}return H.Ro=t,H.Ni=H.Ii=0,X.Ei()},Io:function(t){var n,e,i,r,o,u,l=H.Oi,s=H.Ci;if(!(l.length<=0))for(n=0,e=t;n<e.length;n++){if((r=(i=e[n]).url).length>2e3&&(i.url=r=H.Hi(r,i)),(o=s(r))<0)H.Ni--;else if(!(u=i.title)||u===l[o]._i)continue;H.Ii--,H.Oo(i)}},Ci:function(t){for(var n="",e=H.Oi,i=e.length-1,r=0,o=0;r<=i;)if((n=e[o=r+i>>>1].In)>t)i=o-1;else{if(n===t)return o;r=o+1}return~r}},z={bi:function(t,n){var e,i,r;for(e=0,i=D;e<i.length;e++)if(n.includes(r=i[e])||t.includes(r))return 0;return 1},io:function(t){var n,e,i,r,o,u;if(!D)return true;for(n=0,e=t;n<e.length;n++)for(i=e[n],r=0,o=D;r<o.length;r++)if(u=(u=o[r]).trim(),i.includes(u)||u.length>9&&i.length+2>=u.length&&u.includes(i))return true;return false},No:function(){var t,n,e,i,r,o,u,l,s;if(P.Xt)for(t=0,n=P.Xt;t<n.length;t++)(e=n[t]).gi=D?z.bi(e.ai,e.ni):1;if(H.Oi)for(i=H.F,r=0,o=H.Oi;r<o.length;r++)e=o[r],u=D?z.bi(e.ai,e._i):1,e.gi!==u&&(e.gi=u,i&&(l=L.Wr(e.In))&&(s=i[l.Gr])&&(s.Zi+=u||-1))},jo:function(t){var n,e,i,r=[];for(n=0,e=t.split("\n");n<e.length;n++)(i=e[n])&&i.trimLeft().charCodeAt(0)>35&&i.trim()&&r.push(i);D=r.length>0?r:null,(H.Oi||P.Xt)&&setTimeout(z.No,100)}},G={fi:null,si:null,Rr:{Rr:null,ho:0},Po:[],Nt:0,Jo:0,Gt:function(){var t,n,e,i,r,o=k,u=null,s=0,f=o.join(" ");for(t=G.Po,n=f?t.length:0;0<=--n;)if(t[n].Lo||!I){for(e=t[n].Tr,i=0,r=0;i<e.length&&r<o.length;r++)o[r].includes(e[i])&&i++;if(i>=e.length){u=t[n];break}}G.fi=u,u&&(l.ae.t<200||!u.Oi||u.Oi.length>1e3)&&(s=j.now())-u.Wi<Math.max(300,1.3*l.ae.t)?(G.si=u,u.Tr=o.slice(0)):!f||u&&f===u.Tr.join(" ")||!(f.length>4||/\w\S|[^\x00-\x80]/.test(f))?G.si=null:(G.si={Tr:o.slice(0),Lo:I,Wi:s||j.now(),Oi:u&&u.Oi,Xt:u&&u.Xt},G.Po.push(G.si),G.Nt||(G.Nt=setInterval(G.Fo,6e3)))},Fo:function(){for(var t=G.Po,n=-1,e=j.now()-5983;++n<t.length&&t[n].Wi<e;);++n<t.length?t.splice(0,n):(t.length=0,clearInterval(G.Nt),G.Nt=0)},Er:function(t){var n,e,i;for(n=0,e=G.Po;n<e.length;n++)i=e[n],t<2?i.Oi=null:t<3?i.Xt=null:G.Rr.Rr=null},Qi:function(t){G.Rr.Rr!==t&&(G.Jo&&(clearTimeout(G.Jo),G.Jo=0),G.Rr.Rr=t,t&&(G.Jo=setTimeout(G.Qi,3e3,null)))}},K=decodeURIComponent,X={Mi:function(t,n){if(t.length>=400||t.lastIndexOf("%")<0)return t;try{return K(t)}catch(t){}return X.Ri[t]||(n&&X.Do.push(n),t)},pi:function(t){for(var n,e,i=X.Ri,r=X.Do,o=-1,u=t.length;;)try{for(;++o<u;)(n=t[o]).ai=(e=n.In).length>=400||e.lastIndexOf("%")<0?e:K(e);break}catch(t){n.ai=i[e]||(r.push(n),e)}X.Ei()},Ri:r.D(),Do:[],Vo:-1,Ei:function(){0!==X.Do.length&&-1===X.Vo&&(X.Vo=0,setTimeout(X.qo,17,null))},qo:function(t){for(var n,e,i,r;X.Vo<X.Do.length;X.Vo++){if(!(n=X.Ri[r=(i="string"==typeof(e=X.Do[X.Vo]))?e:e.In]))return t||(t=X.Ao())?(t.open("GET",X.$o+(f>=66?r.replace("#","%25"):r),true),t.send()):(X.Do.length=0,void(X.Vo=-1));i||(e.ai=n)}},Wo:function(){if(!(X.Vo<0)){var t=this.responseText,n=X.Do[X.Vo++];"string"!=typeof n?X.Ri[n.In]=n.ai=t:X.Ri[n]=t,X.Vo<X.Do.length?X.qo(this):(X.Do.length=0,X.Vo=-1)}},xi:true,$o:"1",Ao:function(){if(!X.$o)return null;var t=new XMLHttpRequest;return t.responseType="text",t.onload=X.Wo,t},Qo:function(t){var n=!!t&&!(t=t.toLowerCase()).startsWith("utf"),e=n?"data:text/plain;charset="+t+",":"",i=X.$o;e!==i&&(X.$o=e,n?"1"!==i&&setTimeout(function(){return H.Oi&&X.pi(H.Oi),X.pi(P.Xt)},100):(X.Ri=r.D(),X.Do.length=0),X.xi!==n&&(X.Do=n?[]:{length:0,push:r.S},X.xi=n,X.Vo=-1))}};d={Hr:function(t,n,e){S=false,x=R=(t=t.trim())&&t.replace(r.B," "),q.bo(),k=(t=R)?(t=t.length<201?t:r.R(t,0,200).trimRight()).split(" "):[],(p=0|n.c||128)&&(p-=t.replace(/[\u2e80-\u2eff\u2f00-\u2fdf\u3000-\u303f\u31c0-\u31ef\u3200-\u9fbf\uf900-\ufaff\ufe30-\ufe4f\uff00-\uffef]/g,"aa").length-t.length),p=Math.max(50,Math.min(p,320)),B=!!(1&(U=n.f)),b=y=Math.min(Math.max(3,0|n.r||10),25),T=0,q.Li=e;var i="bomni"===n.o?(U|=64,A.omni):A[n.o],o=k.length>=1?k[0]:"",u=n.t;i===A.tab&&(M=!!(2&U)),S=null!=i&&1===i.length,2===o.length&&":"===o[0]&&(i="b"===(o=o[1])?A.bookm:"h"===o?A.history:"t"===o||"w"===o?(M="w"===o,A.tab):"B"===o?(U|=64,A.omni):"H"===o?(U|=32,A.omni):"d"===o?A.domain:"s"===o?A.search:"o"===o?A.omni:null)&&(S=1===i.length,k.shift(),R=R.slice(3),0!==u&&(i=null)),k.length>0&&(k[0]=r.Mn(k[0])),I=z.io(k),O=0!==u?u:63,q.Hr(i||A.omni)},Ar:function(t,n,e){switch(n){case"tab":chrome.tabs.remove(+t,function(){var t=r.C();return t||G.Qi(null),e(!t),t});break;case"history":var i=!H.Jr||H.Ci(t)>=0;chrome.history.deleteUrl({url:t}),i&&G.Er(1),e(i)}},Kt:function(){G.Rr.Rr&&(1&G.Rr.ho||!(2&G.Rr.ho)!=(2===m.rr))&&G.Qi(null)}},l._e.omniBlockList=z.jo,l.we("omniBlockList"),l._e.localeEncoding=X.Qo,l.we("localeEncoding"),r.Kn(80,function(){l.we("searchEngines",null)})});var d={Hr:function(t,n,e){r.Kn(210,function(){return d.Hr(t,n,e)})},Ar:r.S,Kt:r.S};r.Kn(1e3,function(){function t(n,i){function o(t){var n,i,o,u;if(U){for(n in r.O(t),U)!(o=(i=n.split(":")[0])===n)&&i in U||e(i,null!=(u=o?U[n]:null)?u.newValue:t[i],t);U=null}}var u,s,f;if("sync"===i){if(r.O(n),u=l.$e&&l.$e())return U&&r.y(n,U),U=n,void u.then(function(){return t({},i)});for(s in U&&(r.y(n,U),U=null),n){if(f=n[s],8===(s.includes(":")?8:e(s,null!=f?f.newValue:null)))return U=n,void h().get(o);delete n[s]}}}function n(){var t,n=[];for(t=0;t<arguments.length;t++)n[t]=arguments[t];console.log.apply(console,[(new Date).toLocaleString()].concat.call([].slice.call(arguments,0)))}function e(t,e,r){var o,u,s,c,a,g;if(t in l.me&&!(t in l.pe)&&_(t)){if(o=l.me[t],u=e&&"object"==typeof e&&e.$_serialize||""){if("split"===u&&!r)return 8;if(8===(e=(function(t,e,i){var r,o,u,s,c="";switch(e.$_serialize){case"split":for(r=e.k,o=e.s,u=0;u<o;u++){if(!(s=i[t+":"+u])||!s.startsWith(r))return 8;c+=s.slice(r.length)}break;case"single":return JSON.parse(f(JSON.stringify(e.d)));default:return n("Error: can not support the data format in synced settings data:",t,":",e.$_serialize),null}return"string"==typeof l.me[t]?c=f(c):(c=f(JSON.stringify(c)),JSON.parse(c.slice(1,-1)))})(t,e,r)))return}null!=e?(s=y?o:l.de(t),(g="object"!=typeof o)?(a=e,c=s):(a=JSON.stringify(e),c=JSON.stringify(s)),a!==c&&(a===(s=g?o:JSON.stringify(o))&&(e=o),y||n("sync.this: update",t,"string"==typeof e?(e.length>32?e.slice(0,30)+"...":e).replace(/\n/g,"\\n"):e),i(t,e))):null!=localStorage.getItem(t)&&(y||n("sync.this: reset",t),i(t,o))}}function i(t,n){var e="keyMappings"===t?"Commands":t.startsWith("exclusion")?"Exclusions":"";if(!e)return o(t,n);Promise.all(["Exclusions"===e&&r.pn("Commands"),r.pn(e)]).then(function(){return o(t,n)}),r.Wn()}function o(t,n){B=t,l.he(t,n),B="",t in l.ge&&l.ye({N:6,d:[l.ge[t]]})}function u(t,n){_(t)&&t!==B&&(S||(setTimeout(a,800),S=r.D()),S[t]=n)}function s(t,e){var i,o,u;h()?(o=chrome.storage.local,u=function(){var e=r.C();if(e)return n("storage.local: Failed to update",t,":",e.message||e),e},null==e?o.remove(t,u):o.set(((i={})[t]=e,i),u)):l.ve=r.S}function f(t){var n={Q:'\\"',S:"\\\\",d:"`",l:"<",n:"\u2029",q:'"',r:"\u2028"};return t.replace(/`[QSdlnqr]/g,function(t){return n[t[1]]})}function c(t,n,e){var i,r,o,u,s,f,c,a,_,g,m,v;if(n&&!("string"!=typeof n?"object"!=typeof n:n.length<8192/6-40)&&(r="",!((i=JSON.stringify(n)).length<8192/6-40))){if(4*(i=i.replace(/[<`\u2028\u2029]/g,function(t){return"<"===t?"`l":"`"===t?"`d":"\u2028"===t?"`r":"`n"})).length<8093)return i;if((r=e.encode(i)).length<8093)return i;for(o=0,u=Date.now().toString(36)+":",s={},i="string"==typeof l.me[t]?i.slice(1,-1):(function(t){return t.replace(/"|\\[\\"]/g,function(t){return'"'===t?"`q":'\\"'===t?"`Q":"`S"})})(i),p||(p=new TextDecoder),f=0,c=(r=e.encode(i)).length;f<c;){for(a=Math.min(f+8134,c),_=void 0,g=0;a<c&&128==(192&r[a]);a--);if((g=(i=(_=p.decode(r.subarray(f,a))).slice(-6)).lastIndexOf("\\"))>i.length-2)_+="b",g=1;else if(g>0&&"u"===i[g+1])for(m=g=i.length-g;m++<6;_+="b");else g=0;if(_=JSON.parse('"'+_+'"'),g&&((v=_.endsWith("b"))||(a-=g),_=_.slice(0,g>1&&v?g-6:-1)),s[t+":"+o++]=u+_,f=a,o>=13)break}return s[t]={$_serialize:"split",k:u,s:o},s}}function a(){var t,e,i,o,s,f,a,_,g=S,m=[],v=[],d=[],B=r.D(),U={};if(S=null,g&&l.ve===u){for(e in t=new TextEncoder,g)for(o=g[i=e],f="string"==typeof(s=l.me[i])||"object"==typeof s&&"vimSync"!==i?0:13,null!=o?(a=c(i,o,t))&&"object"==typeof a?(B[i]=a,f=a[i].s):(U[i]=a?{$_serialize:"single",d:JSON.parse(a)}:o,v.push(i)):(d.push(i),m.push(i));f<13;f++)d.push(i+":"+f);for(i in p=t=null,m.length>0&&n("sync.cloud: reset",m.join(", ")),d.length>0&&h().remove(d),v.length>0&&(n("sync.cloud: update",v.join(", ")),h().set(U)),_=function(t){h().set(B[t],function(){var e=r.C();return e?n("Failed to update",t,":",e.message||e):n("sync.cloud: update (serialized) "+t),e})},B)_(i)}}function _(t){return!(t in T)}function g(t){l.Yn.Qn=null,r.Kn(t,function(){chrome.storage.local.get(function(t){var e,i,o,u,f,c,a,g,m;if(!l.de("vimSync")&&localStorage.length){for(n("storage.local: backup all settings from localStorage"),r.O(t),e=0,i=localStorage.length;e<i;e++)(o=localStorage.key(e))in l.me&&(_(o)||"keyboard"===o)&&(u=l.me[o],f=t[o],a=c=l.de(o),g=f,"object"==typeof u&&(g=JSON.stringify(f),a=JSON.stringify(c)),a!==g&&s(o,c),delete t[o]);(m=Object.keys(t)).length>0&&chrome.storage.local.remove(m)}})})}function m(i,o,u){var f,c,a,g,m,v,d,S,U,p,T,w,k,x;if(2&o&&chrome.storage.local.get(function(t){var e,i,s,f,c=r.C();if(c)return l.$e=null,(o-=2)||u(),c;for(s in r.O(t),i=void 0!==(e=t.vimSync)||Object.keys(t).length>0,delete t.vimSync,i&&n("storage.local: restore settings to localStorage"),t)s in l.me&&(B=s,f=null==(f=t[s])?l.me[s]:f,l.he(s,f));B="",null!=e&&l.he("vimSync",e),r.Kn(100,function(){l.ye({N:6,d:l.ue})}),(o-=2)||u()}),2!==o){if(r.O(i),!(f=i.vimSync||l.de("vimSync")))return b=f,l.ve=s,void(--o||u());for(a in i.vimSync||(n("sync.cloud: enable vimSync"),i.vimSync=f,h().set({vimSync:f})),c=[],i)a in l.Ue&&c.push(a);for(g=[],m={},v=0,d=c;v<d.length;v++)for(a=d[v],S=l.Ue[a],U=-1,p=void 0;U<13&&(p=U<0?a:a+":"+U)in i;U++)m[T=U<0?S:S+":"+U]=i[T]=i[p],delete i[p],g.push(p);for(c.length>0&&(chrome.storage.onChanged.removeListener(t),l.ve=r.S,h().remove(g),h().set(m,r.C),c.length=0),U=0,w=localStorage.length;U<w;U++)!((a=localStorage.key(U))in i)&&a in l.me&&_(a)&&c.push(a);for(k=0,x=c;k<x.length;k++)e(a=x[k],null);for(a in i)a.includes(":")||e(a,i[a],i);l.we("vimSync"),r.Kn(4,function(){--o||u()}),y&&n("sync.cloud: download settings to localStorage")}}var v,d,h=function(){return v||(v=chrome.storage&&chrome.storage.sync)},S=null,B="",U=null,p=null,y=null,b=l.de("vimSync"),T=r.O({findModeRawQueryList:1,innerCSS:1,keyboard:1,newTabUrl_f:1,vomnibarPage_f:1});if(l._e.vimSync=function(n){if(b=n,h()){var e=chrome.storage.onChanged;if(!n)return e.removeListener(t),void(l.ve!==s&&(l.ve=s,g(600)));l.ve!==u&&(e.addListener(t),l.ve=u,chrome.storage.local.clear())}},l.$e=function(){if(y);else{if(localStorage.length)return null;r.Wn(),y=Promise.all([r.pn("Commands"),r.pn("Exclusions")]).then(function(){return new Promise(function(t){b?h().get(function(n){var e=r.C();return e?(l.$e=null,t()):m(n,1,t),e}):m({},2,t)}).then(function(){y=null})})}return y},false===b||!b&&!l.Yn.Jn)return d=l.Yn.Qn,l.Yn.Qn=d?null:g,d&&g(6e3),void(l.ve=s);r.Wn(),h()?h().get(function(t){var e=r.C();if(e)return n("Error: failed to get storage:",e,"\n\tSo disable syncing temporarily."),l._e.vimSync=l.ve=r.S,l.$e=null,e;y=Promise.resolve(),y=new Promise(function(n){return m(t,3,n)}).then(function(){y=null})}):l.$e=null}),r.Kn(150,function(){var t,e,i,o,u=chrome.browserAction;u&&(true,i=l._e.showActionIcon,o=function(n){var i,o=l.ze[n];(i=new XMLHttpRequest).open("GET",o,true),i.responseType="arraybuffer",i.onload=function(){(function(i){var o,u,l,s=new Uint8ClampedArray(i),f=i.byteLength/5,c=0|Math.sqrt(f/4),_=c+c,g=r.D();for(g[c]=new ImageData(s.subarray(0,f),c,c),g[_]=new ImageData(s.subarray(f),_,_),t[n]=g,o=e[n],delete e[n],u=0,l=o.length;u<l;u++)a._r(o[u],n,true)})(this.response)},i.send()},l.Yn.re=function(n){var i,o,u;if(null==n)return!!t;if(n){if(!t)for(o in t=[null,null,null],e=r.D(),i=a.Se())0!==(u=i[+o][0].s).s&&a._r(u.t,u.s)}else t&&setTimeout(function(){l.de("showActionIcon")||(t=null,e=null)},200)},a._r=function(n,i,l){var s,f,c;(s=t[i])?(f=u.setIcon,c={tabId:n,imageData:s},l?f(c,r.C):f(c)):e[i]?e[i].push(n):(setTimeout(o,0,i),e[i]=[n])},l._e.showActionIcon=function(t){i(t),l.Yn.re(t);var e=n("name");t||(e+="\n\n"+n("noActiveState")),u.setTitle({title:e})},l.we("showActionIcon"))}),r.Kn(600,function(){function t(){v&&(v.Ho=null),S=U=v=_=null,p&&clearTimeout(p),h&&clearTimeout(h),y=T=w=p=h=0,g="",r.x()}function n(){var e=Date.now()-y;if(e>5e3||e<-5e3)return t();p=setTimeout(n,3e4)}function e(){var t,n;if(h=0,(t=v)&&!t.zo)return v=null,t.Ho?((n=Date.now())<y&&(y=n-1e3),o(t.q,t.Ho)):void 0}function i(t,n,e,i,o){var u,l,s,f,a,d,h,B,p,y,k,x,R,C,M,E,O;if(t.Ho){for(v=null,l=(u=n.length>0)?n[0]:null,f={},T=i,w=o,u&&(c||null!=n[0].s)&&(S=r.D()),U=[],a=r.D(),d=0,h=e?0:1,B=n.length;d<B;d++)y=(p=n[d]).title,k=p.u,x=p.e,R="",C=null!=p.s,M=c&&!(e&&0===d)&&("tab"===x?p.s!==m.ir:"history"===x&&!C),k in a?k=":"+(d+h)+" "+k:a[k]=1,M&&(f.ho=x,R=" ~"+(d+h)+"~"),E={content:k,description:R="<url>"+p.textSplit+(R=y?"</url><dim> - "+y+R+"</dim>":R?"</url><dim>"+R+"</dim>":"</url>")},M&&(E.deletable=true),C&&(f.Gi=p.s),(M||C)&&(S[k]=f,f={}),U.push(E);if(_=t.q,e)if("search"===l.e){if(s=((O=l.p)&&"<dim>"+r.P(O)+" - </dim>")+"<url>"+l.textSplit+"</url>",b=2,l=n[1])switch(l.e){case"math":U[1].description="<dim>"+l.textSplit+" = </dim><url><match>"+l.t+"</match></url>"}}else b=3,s=U[0].description;else 1!==b&&(s="<dim>Open: </dim><url>%s</url>",b=1);e&&(g=n[0].u,U.shift()),s&&chrome.omnibox.setDefaultSuggestion({description:s}),t.Ho(U),r.x()}else v===t&&(v=null)}function o(t,o){var u,s,f,c;t=t.trim().replace(r.B," "),v&&(v.Ho=(u=t===v.q)?o:null,u)||(t!==_?1===T&&t.startsWith(_)?o([]):(v={Ho:o,q:t,zo:false},h||(s=Date.now(),(f=l.ae.t+y-s)>30&&f<3e3?h=setTimeout(e,f):(v.zo=true,p||(p=setTimeout(n,3e4)),y=s,S=U=null,g="",c=T<2||!t.startsWith(_)?0:3===T?t.includes(" ")?0:8:w,d.Hr(t,{o:"omni",t:c,r:k,c:B,f:1},i.bind(null,v))))):U&&o(U))}function u(t,n,e){return t?":"===t[0]&&/^:([1-9]|1[0-2]) /.test(t)&&(t=t.slice(" "===t[2]?3:4)):t=r.J(""),"file://"===t.slice(0,7).toLowerCase()&&(t=r.Pn(t)),null!=e?a.Lr({s:e}):a.Dr({u:t,o:true,r:"currentTab"===n?0:"newForegroundTab"===n?-1:-2})}var s,c,_,g,v,h,S,B,U,p,y,b,T,w,k,x=chrome.omnibox;x&&(c=!!(s=x.onDeleteSuggestion)&&"function"==typeof s.addListener,_=null,g="",v=null,h=0,S=null,B=128,U=null,p=0,b=0,T=0,w=0,k=f<60?6:12,x.onInputStarted.addListener(function(){if(chrome.windows.getCurrent(function(t){var n=t&&t.width;B=n?Math.floor((n-160/devicePixelRatio)/7.72):128}),p)return t()}),x.onInputChanged.addListener(o),x.onInputEntered.addListener(function n(i,o){var l,s=v;if(s&&s.Ho){if(s.Ho=n.bind(null,i,o),s.zo)return;return h&&clearTimeout(h),e()}return i=i.trim().replace(r.B," "),null===_&&i?d.Hr(i,{o:"omni",t:0,r:3,c:B,f:1},function(t,n){return n?u(t[0].u,o,t[0].s):u(i,o)}):(g&&i===_&&(i=g),l=S&&S[i]&&S[i].Gi,t(),u(i,o,l))}),c&&s.addListener(function(t){var n=parseInt(t.slice(t.lastIndexOf("~",t.length-2)+1))-1,e=U&&U[n].content,i=e&&S&&S[e]||null,r=i&&i.ho;if(r)return":"===e[0]&&(e=e.slice(e.indexOf(" ")+1)),a.Ar({t:r,u:"tab"===r?i.Gi:e});console.log("Error: want to delete a suggestion but no related info found (may spend too long before deleting).")}))}),chrome.runtime.onInstalled.addListener(l.Yn.Zn=function(t){var e=t.reason;if("install"===e)e="";else{if("update"!==e)return;e=t.previousVersion}l.Yn.Zn&&(chrome.runtime.onInstalled.removeListener(l.Yn.Zn),l.Yn.Zn=null,r.Kn(500,function(){var i,o;chrome.tabs.query({status:"complete"},function(t){var n,e,i,o,u,s=chrome.tabs,f=r.C,c=location.origin.length,a=l.$.Oe;for(n=t.length,e=a.length-1;0<=--n;)if(!(i=t[n].url).startsWith(v)&&i.includes("://")&&!i.startsWith("edge"))for(o=t[n].id,u=0;u<e;++u)s.executeScript(o,{file:a[u].slice(c),allFrames:true},f)}),console.log("%cVimium C%c has been %cinstalled%c with %o at %c%s%c.","color:red","color:auto","color:#0c85e9","color:auto",t,"color:#0c85e9",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toJSON().slice(0,19).replace("T"," "),"color:auto"),l.$.De&&console.log("Sorry, but some commands of Vimium C require the permission to run in incognito mode."),e&&(parseFloat(l.$.Ee)<=parseFloat(e)||((i=l.Yn).Qn?i.Qn(6e3):i.Qn=true,l.de("notifyUpdate")&&(e="vimium_c-upgrade-notification",o={type:"basic",iconUrl:location.origin+"/icons/icon128.png",title:"Vimium C "+n("Upgrade"),message:n("upgradeMsg",[l.$.qe])+n("upgradeMsg2")+"\n\n"+n("clickForMore")},f<67&&(o.isClickable=true),f>=70&&(o.silent=true),chrome.notifications&&chrome.notifications.create(e,o,function(t){var n;if(n=r.C())return n;e=t||e,chrome.notifications.onClicked.addListener(function(t){t===e&&(chrome.notifications.clear(e),a.qr({u:r.J("vimium://release")}))})}))))}))}),r.Wn=function(t){function n(){if(Math.abs(performance.now()-e)<1e5)i=setTimeout(n,3e5);else{i=0;var t=l._e;Commands&&(t.keyMappings=null,Commands=null),Exclusions&&Exclusions.Vr.length<=0&&(t.exclusionRules=t.exclusionOnlyFirstMatch=t.exclusionListenHash=null,Exclusions=null)}}var e=0,i=0,o=0;return r.Wn=function(t){t&&(o=o+t>0?o+t:0),o>0||!Commands||!Exclusions||Exclusions.Vr.length>0?i&&(clearTimeout(i),i=0):(e=performance.now(),i=i||setTimeout(n,3e5))},r.Wn(t)},r.Kn(1200,function(){l.Yn.Zn&&chrome.runtime.onInstalled.removeListener(l.Yn.Zn),l.Yn.Zn=null,document.documentElement.innerText="",r.x()});