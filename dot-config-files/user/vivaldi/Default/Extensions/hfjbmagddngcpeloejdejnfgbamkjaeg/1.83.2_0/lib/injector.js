"use strict";var browser,WeakSet,requestIdleCallback,VimiumInjector=VimiumInjector||{id:"",alive:-1,host:"",version:"",cache:null,clickable:void 0,reload:null,checkIfEnabled:null,$h:"",$m:null,$r:null,getCommandCount:null,callback:null,destroy:null};(function(t,n){function e(t){var e,c,r,a,f,m,h,v,b,E,k,p,C,g,L=i.lastError,T=VimiumInjector,$=T&&T.clickable,w=T&&T.callback;if(t||(r=L&&L.message,a=i.id||location.host||location.protocol,c=!!(r&&r.lastIndexOf("not exist")>=0&&i.id),false===t?e=": not in the allow list.":!c&&L?e=r?":\n\t"+r:": no backend found.":s>3?(e=r?":\n\t"+r:": retried but failed ("+t+").",c=false):(setTimeout(o,200*s),s++,c=true),c||(e=e||" ("+s+" retries).","color:red","color:auto",console.log("%cVimium C%c: %cfail%c to inject into %c%s%c %s","color:red","color:auto","color:red","color:auto","color:#0c85e9",a,"color:auto",e),w&&T.callback(-1,e))),T&&"function"==typeof T.destroy&&T.destroy(true),f=VimiumInjector={id:d,alive:0,host:d,version:t?t.version:"",cache:null,clickable:$,reload:n(u),checkIfEnabled:null,$h:t?t.h:"",$m:function(t){VimiumInjector&&VimiumInjector.$r(t.t)},$r:function(){},getCommandCount:null,callback:w||null,destroy:null},m=document.documentElement,!(t&&m instanceof HTMLHtmlElement))return L;for(v=(h=document.contains(l)?l:(document.head||m).lastChild).nextSibling,b=h.parentElement,E=[],k=0,p=t.s;k<p.length;k++)C=p[k],(g=document.createElement("script")).type="text/javascript",g.async=false,g.src=C,b.insertBefore(g,v),E.push(g);E.length>0&&(E[E.length-1].onload=function(){this.onload=null;for(var t=E.length;0<=--t;)E[t].remove()}),w&&f.callback(0,"loading")}function o(){i.sendMessage(d,{handler:99,scripts:true},e)}function c(){removeEventListener("DOMContentLoaded",c),a?a(function(){a(function(){setTimeout(o,0)},{timeout:67})},{timeout:330}):setTimeout(o,67)}var i=chrome.runtime,l=document.currentScript,u=l.src,r=u.indexOf("://")+3,a=window.requestIdleCallback,s=1,d=u.slice(r,u.indexOf("/",r));VimiumInjector.id=d=l.dataset.extensionId||d,"loading"!==document.readyState?c():addEventListener("DOMContentLoaded",c,true)})(0,function(t){return function(n){function e(){var e,o=document.documentElement;o&&((e=document.createElement("script")).type="text/javascript",e.async=false,e.src=t,console.log("%cVimium C%c begins to reload%s.","color:red","color:auto",1===n?" because it has been updated.":""),(document.head||document.body||o).appendChild(e))}var o,c=VimiumInjector;c&&(o=c.clickable,"function"==typeof c.destroy&&c.destroy(true),c.clickable=o),n?setTimeout(e,200):e()}}),(!document.currentScript||"false"!==(document.currentScript.dataset.vimiumHooks||"").toLowerCase())&&null!==VimiumInjector.clickable&&(function(){var t,n,e,o,c,i,l,u,r;VimiumInjector.clickable=VimiumInjector.clickable||new WeakSet,t=EventTarget,true!==(e=(n=t.prototype).addEventListener).vimiumHooked&&(o=HTMLAnchorElement,c=Element,i=n.addEventListener=function addEventListener(t,n){var i,l,u;return"click"===t&&!(this instanceof o)&&n&&this instanceof c&&(i=VimiumInjector)&&i.clickable&&i.clickable.add(this),2===(u=(l=arguments).length)?e.call(this,t,n):3===u?e.call(this,t,n,l[2]):e.apply(this,l)},u=(l=Function.prototype).toString,r=l.toString=function toString(){return u.apply(this===i?e:this===r?u:this,arguments)},i.vimiumHooked=true,t.vimiumRemoveHooks=function(){delete t.vimiumRemoveHooks,n.addEventListener===i&&(n.addEventListener=e),l.toString===r&&(l.toString=u)},i.prototype=r.prototype=void 0)})();